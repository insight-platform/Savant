name: test

parameters:
  batch_size: 1
  stream_buffer_pool_size: 64
  muxer_buffer_pool_size: 64
#  batched_push_timeout: 40000

pipeline:
# run with different sources:
# ./scripts/run_source.py multi-stream --number-of-streams 1 data/elon_musk_perf.mp4

#  source:
#    element: uridecodebin
#    properties:
#      uri: file:///data/elon_musk_perf.mp4

#  source:
#    element: videotestsrc
#    properties:
#      num-buffers: 100
#      caps: video/x-raw, framerate=(fraction)200/1, width=1280, height=720

  elements:
    - element: pyfunc
      name: pyfunc1
      module: samples.test.pyfunc
      class_name: PyFunc

    - element: queue_log
      properties:
#        leaky: upstream
        max-size-buffers: 64
        max-size-bytes: 0
        max-size-time: 0

    - element: pyfunc
      name: pyfunc2
      module: samples.test.pyfunc
      class_name: PyFunc
      kwargs:
        sleep: 0.001  # seconds
        random: 100  # sleep x random[1..random]

    - element: pyfunc
      module: savant.utils.stat_logger
      class_name: StatLogger
